Version 4
SHEET 1 1244 680
WIRE 560 -1024 400 -1024
WIRE 400 -976 400 -1024
WIRE 560 -944 560 -1024
WIRE 560 -864 560 -880
WIRE 560 -848 560 -864
WIRE 48 -784 -64 -784
WIRE 512 -768 112 -768
WIRE 48 -752 32 -752
WIRE -64 -720 -64 -784
WIRE 560 -704 560 -752
WIRE 560 -704 416 -704
WIRE 32 -688 32 -752
WIRE 304 -688 32 -688
WIRE 352 -688 304 -688
WIRE 560 -688 560 -704
WIRE 464 -672 416 -672
WIRE 80 -640 80 -736
WIRE 384 -640 384 -656
WIRE 384 -640 80 -640
WIRE 304 -592 304 -688
WIRE 320 -592 304 -592
WIRE 464 -592 464 -672
WIRE 464 -592 400 -592
WIRE 80 -576 80 -640
WIRE 464 -576 464 -592
FLAG -64 -640 0
FLAG 80 -496 0
FLAG 560 -608 0
FLAG 384 -720 0
FLAG 80 -800 0
FLAG 464 -496 0
FLAG 400 -896 0
FLAG 560 -704 V_sense
FLAG 560 -864 V_drain
SYMBOL OpAmps\\UniversalOpAmp 80 -768 M180
SYMATTR InstName U1
SYMBOL OpAmps\\UniversalOpAmp 384 -688 R180
SYMATTR InstName U2
SYMBOL diode 544 -944 R0
SYMATTR InstName D1
SYMATTR Value D_ideal
SYMBOL nmos 512 -848 R0
SYMATTR InstName M1
SYMBOL voltage -64 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 1.8V
SYMBOL voltage 80 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6V
SYMBOL res 544 -704 R0
SYMATTR InstName R1
SYMATTR Value 1R
SYMBOL res 416 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 29k
SYMBOL res 480 -480 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage 400 -992 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 6V
TEXT -40 -920 Left 2 !.op
TEXT 704 -880 Left 2 !.model D_ideal D(Ron=0.1n Roff=1G Vfwd=5)
